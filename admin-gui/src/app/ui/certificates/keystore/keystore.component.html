<!--
  ~ Copyright 2020-2022 the original author or authors.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~      https://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div *ngIf="authService.isAuthenticated() === true" class="row">

  <div class="col-sm-6">

    <ul class="list-group">
      <div *ngFor="let entry of keystore"
          (click)="onSelectEntry(entry)"
          [class]="getClass(entry)"
          [class.active]="isEntrySelected(entry)">
        <div class="text-box">{{entry.alias}}</div>
        <div class="icon-box">
          <span class="badge badge-primary badge-pill">{{entry.getTypeAbbr()}}</span>
          <span class="oi oi-trash" *ngIf="deleteAllowed === true" (click)="onDelete(entry)"></span>
        </div>
      </div>
    </ul>

  </div>

  <div class="col-sm-6">
    <div *ngIf="selected != null" class="list-group">
      <ul class="list-group">
        <li *ngFor="let entry of selected.chain" class="list-group-item d-flex justify-content-between align-items-center" (click)="onSelectCert(entry)" [class.active]="isCertSelected(entry)">
          <small>
            <h5>{{entry.subjectCN}}</h5>
            <p>
              Issuer: {{entry.issuerCN}}<br>
              From: {{entry.validFrom}}<br>
              To: {{entry.validTo}}
            </p>
          </small>
        </li>
      </ul>
    </div>
  </div>
</div>

<div *ngIf="authService.isAuthenticated() !== true">
  <p>Please log in!</p>
</div>
